<section class="section">
  <div class="container">
    <div class="columns is-centered">
      <div class="column is-half">
        <h1 class="title">Pending Requests for <%= @user.name %></h1><BR>
        
        <h2 class="subtitle">Received Requests</h2>

        <% if @received_requests.any? %>
          <% @received_requests.each do |friendship| %>
            <article class="media">
              <figure class="media-left">
                <p class="image is-48x48">
                  <img src="https://bulma.io/images/placeholders/96x96.png">
                </p>
              </figure>

              <div class="media-content">
                <div class="content">
                  <strong><%= link_to friendship.user.name, user_path(friendship.user) %></strong>, @<%= friendship.user.username %>
                </div>
              </div>

              <div class="media-right">
                <%= link_to "Accept Request", user_friendships_path(user_id: current_user.id, friendship: {friend_id: friendship.user}), method: :post, remote: true, class: "button is-link" %>
              </div>
            </article>
          <% end %>
        <% else %>
          <div class="content"><blockquote>None.</blockquote></div>
        <% end %>

        <h2 class="subtitle">Sent Requests</h2>

        <% if @sent_requests.any? %>
          <% @sent_requests.each do |friendship| %>
            <article class="media">
              <figure class="media-left">
                <p class="image is-48x48">
                  <img src="https://bulma.io/images/placeholders/96x96.png">
                </p>
              </figure>

              <div class="media-content">
                <div class="content">
                  <strong><%= link_to friendship.friend.name, user_path(friendship.friend) %></strong>, @<%= friendship.friend.username %>
                </div>
              </div>

              <div class="media-right">
                <%= link_to "Cancel Request", friendship_path(friendship), method: :delete, local: true, data: {confirm: "Really cancel request?"}, class: "button is-link" %>
              </div>
            </article>
          <% end %>
        <% else %>
          <div class="content"><blockquote>None.</blockquote></div>
        <% end %>
      </div>
    </div>
  </div>
</section>